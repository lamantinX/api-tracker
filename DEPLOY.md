# üöÄ Deployment Guide (Debian/Ubuntu)

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å API Watcher –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Debian 11/12 –∏–ª–∏ Ubuntu 20.04/22.04.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –°–µ—Ä–≤–µ—Ä —Å –¥–æ—Å—Ç—É–ø–æ–º –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (root –¥–æ—Å—Ç—É–ø).
- Python 3.10+.
- Git.

## üõ† –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë –∑–∞ –≤–∞—Å.

1. **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   git clone https://github.com/your-repo/api-tracker.git
   cd api-tracker
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   ```bash
   chmod +x deployment/setup_debian.sh
   sudo ./deployment/setup_debian.sh
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –≤–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:
   ```bash
   nano /opt/api-tracker/.env
   ```
   *–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ–ø–∏—Å–∞—Ç—å `DATABASE_URL`, `OPENROUTER_API_KEY` –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.*

## ‚öôÔ∏è –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
–°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ç–∞–π–º–µ—Ä—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑ –≤ 1 —á–∞—Å).

```bash
# –°—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞ (–∫–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫)
systemctl status api-watcher.timer

# –°—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
systemctl status api-watcher.service
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
–õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ `/var/log/api-watcher/` –∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ journald.

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
tail -f /var/log/api-watcher/watcher.log

# –õ–æ–≥–∏ —á–µ—Ä–µ–∑ systemd
journalctl -u api-watcher.service -f
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å —Ç–∞–π–º–µ—Ä–∞:

```bash
sudo systemctl start api-watcher.service
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç):

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Ç–∞–π–º–µ—Ä–∞:
   ```bash
   nano /etc/systemd/system/api-watcher.timer
   ```
2. –ò–∑–º–µ–Ω–∏—Ç–µ `OnUnitActiveSec=1h` –Ω–∞ `OnUnitActiveSec=15min`.
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd:
   ```bash
   systemctl daemon-reload
   systemctl restart api-watcher.timer
   ```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏

–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/api-tracker
sudo -u apiwatcher git pull
sudo -u apiwatcher ./venv/bin/pip install -r api_watcher/requirements.txt
```
*–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞.*

